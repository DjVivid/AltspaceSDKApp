<!DOCTYPE html>
<html>
<!--
Created using JS Bin
http://jsbin.com
Copyright (c) 2018 by DjVivid (http://jsbin.com/redukux/12/edit)
Released under the MIT license: http://jsbin.mit-license.org
-->
<!-- window.location = 'https://kenny1184.github.io/AltspaceSDKApp/Fly/Fly.html'; -->

<meta name="robots" content="noindex">


  <head>
    <meta name="description" content="Kenny's mod of Lunar's mod of Andy's Mod of Ducky's Fly Script">
    <title>Fly</title>
    <script src="https://aframe.io/releases/0.3.0/aframe.js"></script>
    <script src="https://sdk.altvr.com/libs/altspace.js/2.8.0/altspace.min.js"></script>
    <script src="https://tweenjs.github.io/tween.js/src/Tween.js"></script>
    <script src="https://cdn.rawgit.com/oOblik/AltspaceVR-Native-Components-JS/0.1.2/js/JSNativeComponents.js"></script>
    <!--<script>
      AFRAME.registerComponent('collapse-model', {
        init: function () {
          this.el.addEventListener('model-loaded', function () {
            this.el.setObject3D('mesh', this.el.object3DMap.mesh.children[0]);
            // setObject3D emits this event in a-frame 0.4.0
            this.el.emit('object3dset', {type: 'mesh'});
          }.bind(this));
        }
      });
    </script>-->
</head>
  <body>

    <a-scene altspace="fullspace: true"> 
 

     <a-entity position=" 0 100 0" id="box" n-box-collider="isTrigger:true; type:environment; size: 250 50 250" n-container="capacity:1" wire="on: container-full; emit: trig; targets: #box"></a-entity>
      
      <a-box id='elevator' material="visible:false" scale='2000 1 2000' position='0 -5000 0' n-mesh-collider='type: environment; convex: false'></a-box> <!-- edited out: opacity='0' -->
      
      <a-plane id="reset" src='https://kenny1184.github.io/AltspaceSDKApp/Fly/reset.jpg' position='-1.5 -5000 -1' rotation='-25 45 0' scale='0.15 0.15 0' opacity='0.3' n-cockpit-parent altspace-cursor-collider="enabled: true"></a-plane>
      <a-plane id="up" src='https://kenny1184.github.io/AltspaceSDKApp/Fly/up.jpg' position='-0.9 -5000 -1.61' rotation="-25 0 0" scale="0.15 0.15 0" opacity='0.3' n-cockpit-parent altspace-cursor-collider="enabled: true"></a-plane>
      <a-plane id="down" src='https://kenny1184.github.io/AltspaceSDKApp/Fly/down.jpg' position='-1.1 -5000 -1.61' rotation="-25 0 0" scale="0.15 0.15 0" opacity='0.3' n-cockpit-parent altspace-cursor-collider="enabled: true"></a-plane>
	  <a-plane id="spawn1" src='https://kenny1184.github.io/AltspaceSDKApp/Fly/spawn1.jpg' position='-1.5 -5000 -1.2' rotation="-25 0 0" scale="0.15 0.15 0" opacity='0.3' n-cockpit-parent altspace-cursor-collider="enabled: true"></a-plane>
      
    <a-entity id="text" n-text='text: Click box' position='-1 0.16 -1.68' rotation="-25 0 0" scale="0.09 0.09 0" n-cockpit-parent altspace-cursor-collider="enabled: false"></a-entity>
      <a-plane id="tbackground" color='#472222' position='-0.92 -5000 -1.62' rotation="-25 0 0" scale="0.37 0.25 0" opacity='0.3' n-cockpit-parent altspace-cursor-collider="enabled: true"></a-entity>

    </a-scene>

    <script>
    var sim = new altspace.utilities.Simulation();
    sim.scene.addBehavior(altspace.utilities.behaviors.GamepadControls);
    var height = -5;
    altspace.getGamepads();
    var pads =[];
    var htxt
    var el = document.querySelector('#elevator').object3D;
    var needset = true;
    var gamepads = false;
    var box = new THREE.Mesh(new THREE.BoxGeometry(0.5,0.5,0.5), new THREE.MeshBasicMaterial({color: 0x006900}));
    box.position.y = 1;
    //sim.scene.add(box);
    new NativeComponent('n-box-collider', {type: 'hologram',size: '0.15 0.15 0.03'}, box).addTo(sim.scene);
    box.position.set(0,3,0);
    box.addEventListener('cursorup', function(){
      reset();
      pads = altspace.getGamepads();
      if(pads[1]!=undefined){gamepads = true;}
      if(gamepads){
        console.log("Gamepads Activated");
        console.log(pads[1]);
        console.log(pads[2]);
        console.log(pads[1].buttons[2].value);
        console.log(pads[2].buttons[2].value);
        //bp();
      }
      else{console.log("You don't have gamepads");}
      box.position.set(0,-5000,0);
      console.log('Box is now "invisible"');
    });
    document.querySelector('#box').addEventListener('trig', function(){
      go();
    });
    //console.log(pads);
    document.querySelector('#up').addEventListener('mousedown', function() {move(1)});
    document.querySelector('#down').addEventListener('mousedown', function() {move(-1)});
    document.querySelector('#reset').addEventListener('mousedown', function() {reset()});
	document.querySelector('#spawn1').addEventListener('mousedown', function() {spawn1 = new altspace.interactables/basketball});
    function set(){
      console.log('you can fly');
	  document.querySelector('#spawn1').setAttribute('position', '-0.7 0.05 -1.61');
      document.querySelector('#up').setAttribute('position', '-0.9 0.05 -1.61');
      document.querySelector('#down').setAttribute('position', '-1.1 0.05 -1.61');
      document.querySelector('#tbackground').setAttribute('position', '-1.015 0.07 -1.65');
      needset=false;
    }
    function move(i) {
      height += i;
      new TWEEN.Tween(el.position).to({y:height - .5}, 500).start();
      htxt = Math.round(height);
      document.querySelector('#text').setAttribute('n-text', 'text:' + htxt + 'm');
    }
    function reset() {
      if(needset){set();}
      height = -5;
      el.position.y = -5.5;
      document.querySelector('#text').setAttribute('n-text', 'text: -5m');
      //console.log(pads);
    }
    function go() {
      pads = altspace.getGamepads();
      console.log("Activated Aframe");
      if(gamepads){
        console.log("Activated Gamepads");
        console.log(pads[1]);
        console.log(pads[2]);
        console.log(pads[1].buttons[2].value);
        console.log(pads[2].buttons[2].value);
        }
    }
    loop();
    function loop() {
      TWEEN.update();
      //console.log(pads);
      requestAnimationFrame(loop);
      if(gamepads){
        if (pads[2].buttons[2].value == 1) {
          //console.log(pads[2].buttons[2].value);
          move(0.1);
        }
        if (pads[1].buttons[2].value == 1) {
          //console.log(pads[2].buttons[2].value);
          move(-0.1);
        }
      }
    }
    document.querySelector('#reset').setAttribute('position', '-1.5 -0.5 -1.2');
    </script>
</body>
</html>


<!-- All interactables

var everything = {
    prefabs:[
        {
            name:"effects",
            description:"Particle systems and other native effects",
            children:[
                {type:'effects/explosion',description:"A particle system with a central flash, then debris flying outward. This is a non-looping effect."},
                {type:'effects/fire',description:"An animated fire particle, suitable for a torch."},
                {type:'effects/fire-trail',description:"Fire that trails the entity through space as it moves. Only is visible while an object is in motion."},
                {type:'effects/fireworks',description:"A compound particle system that shoots up from the entity, explodes into colored sparks, then transitions to gold streamers."},
                {type:'effects/smoke',description:"Billowing smoke particle system."},
                {type:'effects/sparkler',description:"Emits sparks in all directions."},
                {type:'effects/steam',description:"Small white steam rising upwards"},
            ]
        },
        {
            name: "objects",
            description: "Static models that you can place in your scene.",
            children: [
                {type: 'objects/basketball-hoop'},
                {type: 'objects/coin'},
                {type: 'objects/cup'},
                {type: 'objects/gem'},
                {type: 'objects/hoop'},
                {type: 'objects/ring'},
                {type: 'objects/target-archery'},
                {type: 'objects/bunny-ball-white'},
                {type: 'objects/kitten-grey'},
                {type: 'objects/kitten-yellow'},
                {type: 'objects/red-panda'},
                {type: 'objects/corgi-red'},
                {type: 'objects/kiwi'},
                {type: 'objects/owl'},
                {type: 'objects/bear-standing'},
                {type: 'objects/cat-standing'},
                {type: 'objects/panda-standing'},
                {type: 'objects/fox-standing'},
                {type: 'objects/rabbit-standing'},
                {type: 'objects/penguin-standing'},
                {type: 'objects/heatsource-campfire'},
                {type: 'objects/marimba'},
                {type: 'objects/marshmallow-bag'},
                {type: 'objects/bbq-cart'},
                {type: 'objects/burgers-uncooked'},
                {type: 'objects/charcoal-grill'},
                {type: 'objects/pizza-box'},
                {type: 'objects/crowd'},
                {type: 'objects/red-cup-stack'},
                {type: 'objects/stand-glowstick'},
                {type: 'objects/horseshoe-pit'},
                // {type: 'objects/speakers-mini'},
                // {type: 'objects/radio'},
                // {type: 'objects/scaffolding-beam'},
                // {type: 'objects/court'},
            ]
        },
        {
            name: "pipes",
            description: "A selection of pipes/chutes/etc.",
            children: [
                {type:'pipes/pipe-full-cap-1d'},
                {type:'pipes/pipe-full-cross-1d'},
                {type:'pipes/pipe-full-elbow-1d'},
                {type:'pipes/pipe-full-fork-1d'},
                {type:'pipes/pipe-full-straight-1d-1l'},
                {type:'pipes/pipe-full-straight-1d-2l'},
                {type:'pipes/pipe-full-straight-1d-4l'},
                {type:'pipes/pipe-full-tee-1d'},
                {type:'pipes/pipe-half-cap-1d'},
                {type:'pipes/pipe-half-cross-1d'},
                {type:'pipes/pipe-half-elbow-1d'},
                {type:'pipes/pipe-half-fork-1d'},
                {type:'pipes/pipe-half-straight-1d-1l'},
                {type:'pipes/pipe-half-straight-1d-2l'},
                {type:'pipes/pipe-half-straight-1d-4l'},
                {type:'pipes/pipe-half-tee-1d'},
            ]
        },
        {
            name:"architecture",
            description:"Generic modular building pieces. All pieces are aligned to one corner, such that the piece extends out toward -X and +Z.",
            children:[
                {type:'architecture/ceiling-2w-2l'},
                {type:'architecture/ceiling-4w-4l'},
                {type:'architecture/ceiling-skylight-4w-4l'},
                {type:'architecture/ceiling-skylight-corner-2w-2l'},
                {type:'architecture/ceiling-skylight-edge-2w'},
                {type:'architecture/ceiling-skylight-edge-4w'},
                {type:'architecture/ceiling-skylight-filler-4w-4l-2'},
                {type:'architecture/ceiling-skylight-filler-4w-4l'},
                {type:'architecture/ceiling-slice-concave-2r'},
                {type:'architecture/ceiling-slice-concave-4r'},
                {type:'architecture/ceiling-slice-convex-2r'},
                {type:'architecture/ceiling-slice-convex-4r'},
                {type:'architecture/door-4w-4h'},
                {type:'architecture/floor-2w-2l'},
                {type:'architecture/floor-2w-4l'},
                {type:'architecture/floor-4w-2l'},
                {type:'architecture/floor-4w-4l'},
                {type:'architecture/floor-slice-concave-2r'},
                {type:'architecture/floor-slice-concave-4r'},
                {type:'architecture/floor-slice-convex-2r'},
                {type:'architecture/floor-slice-convex-4r'},
                {type:'architecture/railing-2l'},
                {type:'architecture/railing-4l'},
                {type:'architecture/railing-curve-concave-2r'},
                {type:'architecture/wall-2w-4h'},
                {type:'architecture/wall-4w-4h'},
                {type:'architecture/wall-base-2w'},
                {type:'architecture/wall-base-4w'},
                {type:'architecture/wall-base-curve-concave-2r'},
                {type:'architecture/wall-base-curve-concave-4r'},
                {type:'architecture/wall-base-curve-convex-2r'},
                {type:'architecture/wall-base-curve-convex-4r'},
                {type:'architecture/wall-bulkhead-2w'},
                {type:'architecture/wall-bulkhead-4w'},
                {type:'architecture/wall-bulkhead-curve-concave-2r'},
                {type:'architecture/wall-bulkhead-curve-concave-4r'},
                {type:'architecture/wall-bulkhead-curve-convex-2r'},
                {type:'architecture/wall-bulkhead-curve-convex-4r'},
                {type:'architecture/wall-curve-concave-2r-4h'},
                {type:'architecture/wall-curve-concave-4r-4h'},
                {type:'architecture/wall-curve-convex-2r-4h'},
                {type:'architecture/wall-curve-convex-4r-4h'},
                {type:'architecture/wall-curve-window-concave-4r-4h'},
                {type:'architecture/wall-curve-window-concave-filler-4r-4h'},
                {type:'architecture/wall-curve-window-gap-concave-4r-4h'},
                {type:'architecture/wall-curve-window-gap-end-l-concave-4r-4h'},
                {type:'architecture/wall-curve-window-gap-end-r-concave-4r-4h'},
                {type:'architecture/wall-filler-corner-inner-4h'},
                {type:'architecture/wall-filler-corner-outer-4h'},
                {type:'architecture/wall-window-4w-4h'},
                {type:'architecture/wall-window-filler-2'},
                {type:'architecture/wall-window-gap-2w-4h'},
                {type:'architecture/wall-window-gap-4w-4h'},
                {type:'architecture/wall-window-gap-end-l-2w-4h'},
                {type:'architecture/wall-window-gap-end-l-4w-4h'},
                {type:'architecture/wall-window-gap-end-r-2w-4h'},
                {type:'architecture/wall-window-gap-end-r-4w-4h'},
            ]
        }
    ],
    sounds:[
        ,
        {
            name: "sounds-effects",
            description: "Effect sounds for a variety of use cases.",
            children: [
                {
                    type: 'effects/fanfare-succeed',
                    description: "The \"success!\" sound from Holograms Against Humanity."
                },
                {
                    type: 'effects/fanfare-start',
                    description: "The \"Game has started!\" sound from Holograms Against Humanity."
                },
                {
                    type: 'effects/fanfare-fail',
                    description: ""
                },
                {
                    type: 'effects/timer-10s',
                    description: "A 10 second timer that triggers a bell at exactly 10 seconds. The bell lasts for 2 seconds."
                },
                {
                    type: 'effects/gain-coin',
                    description: ""
                },
            ]
        },
        {
            name: "sounds-foley",
            description: "Foley sounds are real sounds designed for tangible, touchable objects as they are heard in the real world.",
            children: [
                {type:'foley/metal-scrape'},
                {type:'foley/metal-clack'},
                {type:'foley/metal-rattle'},
                {type:'foley/coin-jingle'},
                {type:'foley/paper-shuffle'},
                {type:'foley/explode'},
            ]
        },
        {
            name: "sounds-ui",
            description: "Common UI sounds can be used for a consistent UI experience.",
            children: [
                {type:'ui/select'},
                {type:'ui/toggle'},
                {type:'ui/notify'},
                {type:'ui/error'},
                {type:'ui/complete'},
                {type:'ui/succeed'},
                {type:'ui/over'},
                {type:'ui/join'},
                {type:'ui/click'},
            ]
        },
    ],
    interactibles:[
        {
            name: "interactables",
            description: "Objects that can be picked up, thrown, and otherwise interacted with.",
            children: [
                {type: 'interactables/basketball'},
                {type: 'interactables/bowlingball'},
                {type: 'interactables/bowling-pin'},
                {type: 'interactables/box'},
                {type: 'interactables/coin'},
                {type: 'interactables/gem'},
                {type: 'interactables/ring'},
                {type: 'interactables/soccerball'},
                {type: 'interactables/roasting-stick'},
                {type: 'interactables/roman-candle-1'},
                {type: 'interactables/burger-patty'},
                {type: 'interactables/burger-sandwich'},
                {type: 'interactables/can-beer-king'},
                {type: 'interactables/can-beer-litaf'},
                {type: 'interactables/can-beer-millenniale'},
                {type: 'interactables/can-beer-oface'},
                {type: 'interactables/can-beer-pegleg'},
                {type: 'interactables/can-soda-coconut'},
                {type: 'interactables/can-soda-melon'},
                {type: 'interactables/pizza-slice'},
                {type: 'interactables/spatula'},
                {type: 'interactables/glowstick-green'},
                {type: 'interactables/glowstick-purple'},
                {type: 'interactables/glowstick-red'},
                {type: 'interactables/glowstick-orange'},
                {type: 'interactables/glowstick-blue'},
                {type: 'interactables/glowstick-magenta'},
                {type: 'interactables/pingpong-ball'},
                {type: 'interactables/red-cup'},
                {type: 'interactables/flying-disc'},
                {type: 'interactables/horseshoe-a'},
                {type: 'interactables/horseshoe-b'}
            ]
        },
    ]

};

-->
